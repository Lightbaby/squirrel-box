# SidePanel 界面优化：筛选下拉与深色模式

## 📋 任务信息
- 类型：🟡 中等任务 (M)
- 预计时间：1 小时
- 目标：优化 SidePanel 顶部交互，节省空间并提升体验
- 状态：已完成

## 🎯 方案
1. **类型筛选下拉化**：将顶部的类型筛选（目前可能是按钮组）改为下拉选择框，节省顶部空间。
2. **深色模式切换**：新增深色/浅色模式切换功能，默认跟随系统，支持手动切换。

## 📋 清单
- [x] **分析现有代码** (10min)
  - [x] 检查 `SidePanel.tsx` 顶部结构
  - [x] 检查 `tailwind.config.js` 深色模式配置
- [x] **实现深色模式** (20min)
  - [x] 添加 Theme 状态管理 (System/Light/Dark)
  - [x] 实现切换逻辑与持久化存储
  - [x] 添加顶部切换图标
- [x] **实现类型下拉筛选** (20min)
  - [x] 设计符合 UI 风格的 Dropdown 组件
  - [x] 替换原有筛选控件
- [x] **验证与优化** (10min)
  - [x] 验证筛选功能正常
  - [x] 验证深色模式切换及持久化

## ✅ 验收
- [x] 类型筛选变为下拉框，样式美观
- [x] 点击顶部图标可在 浅色/深色/跟随系统 之间切换（或仅 浅色/深色，默认跟随）
- [x] 刷新后记住用户设置的主题

## ✅ 交付清单

### 📝 代码变更
- `src/sidepanel/SidePanel.tsx` - 界面重构，添加主题切换与下拉筛选，配色支持 Light/Dark
- `src/lib/storage.ts` - 添加 Theme 存储逻辑
- `tailwind.config.js` - 启用 `darkMode: 'class'`

### 📊 验证结果
- ✅ 深色模式切换顺滑，支持 System/Light/Dark 三态
- ✅ 筛选器改为下拉样式，节省空间且操作直观
- ✅ 亮色模式下配色清晰，符合系统风格
